!function(a){var b,c,d,e,f;b="styleguide",c="sg",d=c+"-event",e={$window:a(window),$header:a("<header />",{id:c+"-panel",role:"banner"}),$left:a("<div />",{id:c+"-left"}),$menubutton:a("<button />",{id:c+"-toggle",text:"Menu"}),$list:a("<ol />",{"class":c+"-list"}),$right:a("<div />",{id:c+"-right"}),$size:a("<div />",{id:c+"-size"}),$sizeform:a('<form class="'+c+'-size-form">Size <input type="text" class="'+c+"-input "+c+'-size-px" value="320">px /<input type="text" class="'+c+"-input "+c+'-size-em" value="20">em</form>'),$sizepresets:a('<div class="'+c+'-size-presets"><a href="#" class="'+c+'-preset" data-width="320">Phone</a><a href="#" class="'+c+'-preset" data-width="768">Tablet</a><a href="#" class="'+c+'-preset" data-width="1280">Desktop</a><a href="#" class="'+c+'-preset">Full</a></div>'),$options:a("<div />",{"class":c+"-options"}),$optionsbutton:a("<button />",{id:c+"-options-toggle",text:"Options"}),$optionslist:a("<ul />",{id:c+"-options-list"}),$viewport:a("<div />",{id:c+"-viewport"}),$viewportIframe:a("<iframe />",{id:c+"-iframe-viewport",name:c+"-iframe",height:"100%",width:"100%",frameborder:"0"})},a.fn[b]=function(c){var d=Array.prototype.slice.call(arguments,1);return this.each(function(){var e=a(this),f=a.extend({},a.fn[b].defaults,c),g=e.data(b);g?"string"==typeof c&&g[c].apply(g,d):e.data(b,new a[b](a(this),f))})},a.fn[b].defaults={container:a("body"),sections:a(".section"),tocHolder:a(".toc-holder"),prefix:"sg",compactClass:"compact",throttle:250,scrollSpeed:500,responsive:!0,collapsible:!0,position:"none",animSpeed:500,toc:!0,size:!0,presets:!0,highlighting:!0,highlightClass:"current",grid:!0,columns:12,columnClass:"col span-1",baseline:!0},a[b]=function(c,d){return null==c&&null==d?void a("body")[b]():null==c||c instanceof jQuery?(this.$sg=c,this.settings=d,void this.init()):void a("body")[b](c)},a[b].prototype={init:function(){window.self===window.top&&(this.bOnResize=a.proxy(this.onResize,this),this.bOnCustomEvent=a.proxy(this.onCustomEvent,this),this.bSetIframeHeight=a.proxy(this._setIframeHeight,this),this.settings.container=this.$sg,this.settings.$wrapper=this.settings.container,this.settings.useSizing=this.settings.size||this.settings.presets,this.settings.setIframeHeight=this.bSetIframeHeight,this.settings.useSizing?this._setSizeIframe():this._setViewport())},_setSizeIframe:function(){a.ajax(window.location.href).done(a.proxy(function(b){e.$viewport.append(e.$viewportIframe),this.settings.container.prepend(e.$viewport);var c=a("#"+e.$viewportIframe.attr("id")),d=c[0].contentWindow.document;c[0].onload=a.proxy(function(){a("body").contents().not("script, #"+e.$viewport.attr("id")).remove(),this.settings.$wrapper=a("#"+e.$viewportIframe.attr("id")).contents().find("body"),this.settings.sections=this.settings.$wrapper.find("."+this.settings.sections.attr("class")),this._build()},this),d.open(),d.write(b),d.close()},this))},_setViewport:function(){a("body").children().not("script").wrapAll(e.$viewport),this._build()},_setIframeHeight:function(){if(this.settings.useSizing&&"fixed"!==this.settings.position){var b=a("#"+e.$viewport.attr("id")),c=(b.data("height"),a(window.frames[e.$viewportIframe.attr("name")].document).outerHeight());b.css("height","").css("height",a(window.frames[e.$viewportIframe.attr("name")].document).outerHeight()).data("height",c),a("#"+e.$viewportIframe.attr("id")).attr("scrolling","no")}},_build:function(){this.settings.toc&&this._toc.init(this.settings),this._size.init(this.settings),this._options.init(this.settings),e.$right.appendTo(e.$header),e.$menubutton.prependTo(e.$left),e.$left.appendTo(e.$header),this._setDimensions(),"fixed"===this.settings.position?this._fixedHeader():this._unfixedHeader(),this.settings.responsive||e.$header.addClass("not-responsive"),this._attachEvents("bind"),this._checkSize(),this._setIframeHeight(),this._setStyles(),a("#"+e.$header.attr("id")).fadeIn()},_checkSize:function(){if(this.settings.responsive){var b=a("#"+e.$left.attr("id")).data("width"),c=a("#"+e.$right.attr("id")).data("width"),d=b+c+50;a("#"+e.$header.attr("id"))[d<=this.settings.container.width()?"removeClass":"addClass"](this.settings.compactClass)}},_setDimensions:function(){e.$header.prependTo(this.settings.container).css({width:"100000%",position:"absolute",top:"-1000000%"}),a("#"+e.$header.attr("id")).data("height",a("#"+e.$header.attr("id")).outerHeight(!0)),a("#"+e.$right.attr("id")).data("width",a("#"+e.$right.attr("id")).outerWidth(!0)),a("#"+e.$left.attr("id")).data("width",a("#"+e.$left.attr("id")).outerWidth(!0)),a("#"+e.$header.attr("id")).removeAttr("style").hide()},_fixedHeader:function(){e.$header.css("position","fixed"),a("#"+e.$viewport.attr("id")).css("top",a("#"+e.$header.attr("id")).data("height")+"px")},_unfixedHeader:function(){e.$header.prependTo(this.settings.container),"absolute"==this.settings.position&&e.$header.css("position","absolute")},_setStyles:function(){a("html").addClass("fixed"!==this.settings.position?c+"-position-relative":c+"-position-fixed").addClass(this.settings.useSizing?c+"-size":"no-"+c+"-size").addClass(a("#"+e.$left.attr("id")).children(":not(#"+e.$menubutton.attr("id")+")").length>0?c+"-left":"no-"+c+"-left")},_attachEvents:function(b){a(window)[b]("resize orientationchange",f(this.bOnResize,this.settings.throttle)),a(document)[b](d,this.bOnCustomEvent)},onResize:function(a){this._checkSize(),this._setIframeHeight()},onCustomEvent:function(a){if("widthResize"===a.category){var b=a.width;this._options.grid.updateWidth(b)}},_toc:{subnavClass:"drop-down",activeClass:"active",init:function(b){this.settings=b,this.$window=a(this.settings.useSizing||this.settings.presets?window.frames[e.$viewportIframe.attr("name")]:window);var c=this.settings.sections.first().parent().children("."+this.settings.sections.attr("class"));this.bOnScoll=a.proxy(this.onScoll,this),this.bOnSubmenuClick=a.proxy(this.onSubmenuClick,this),this.bOnJumpClick=a.proxy(this.onJumpClick,this),this.bOnMenuClick=a.proxy(this.onMenuClick,this),this.createList(c,e.$list),this.$links=e.$list.find("a"),this.$sublinks=e.$list.find(".drop-arrow"),this.$jumplinks=e.$list.find("a:not(.drop-arrow)"),this.attachEvents()},createList:function(b,c,d){var f=this.settings.tocHolder.length?this.settings.$wrapper.find("."+this.settings.tocHolder.attr("class")):e.$left;b.each(a.proxy(function(b,e){var f=this.settings.sections.attr("class"),g=void 0!==a(e).data("section-title")?a(e).data("section-title"):a(e).find(":first(:header)").text(),h=this.settings.prefix+"-"+f+"-"+(void 0!=d?d+1+"-":"")+(b+1),i=a("<li />");$link=a("<a />",{"class":this.settings.prefix+"-links",href:"#"+h}),a(e).attr("id",h),$link.append(g),i.append($link);var j=a(e).children("."+f),k=a("<a />",{"class":"drop-arrow"});if(j.length>0){i.addClass(this.subnavClass).append(k);var l=a("<ul/>");this.createList(j,l,b),l.appendTo(i)}i.appendTo(c)},this)),e.$list.appendTo(f)},attachEvents:function(){this.$sublinks.bind("click",this.bOnSubmenuClick),this.$jumplinks.bind("click",this.bOnJumpClick),this.settings.responsive&&e.$menubutton.bind("click",this.bOnMenuClick),this.settings.highlighting&&this.$window.bind("scroll",this.bOnScoll)},onSubmenuClick:function(b){var c=b.currentTarget,d=a(c);b.preventDefault(),d.parent().toggleClass(this.activeClass).siblings("."+this.activeClass).removeClass(this.activeClass)},onMenuClick:function(a){a.preventDefault(),e.$list.toggleClass(this.activeClass),e.$list.hasClass(this.activeClass)||this.$links.parent().removeClass(this.activeClass)},onJumpClick:function(b){var c=b.currentTarget,d=a(c),f=d.attr("href"),g=this.settings.$wrapper.find(f).offset().top,h="fixed"===this.settings.position?a(this.settings.$wrapper).add(this.settings.$wrapper.parent()):a("html, body");"fixed"!=this.settings.position||this.settings.size||(g-=parseInt(a("#"+e.$viewport.attr("id")).css("margin-top"),10)),b.preventDefault(),this.$links.parent().removeClass(this.activeClass),this.settings.responsive&&e.$list.removeClass(this.activeClass),h.animate({scrollTop:g},this.settings.scrollSpeed,a.proxy(function(){window.history?window.history.pushState(null,document.title,f):window.location.hash=f},this))},onScoll:function(b){var c=this.$window.scrollTop();this.settings.sections.each(a.proxy(function(b,d){var f=a(d).offset().top,g=f+a(d).height();"fixed"==this.settings.position&&(f-=parseInt(a("#"+e.$viewport.attr("id")).css("margin-top"),10)+5),c>=f&&g>=c&&(this.$links.parent().removeClass(this.settings.highlightClass).eq(b).addClass(this.settings.highlightClass),this.$links.parent().eq(b).closest("."+this.subnavClass).length&&this.$links.parent().eq(b).closest("."+this.subnavClass).removeClass(this.settings.highlightClass).addClass(this.settings.highlightClass))},this))}},_size:{init:function(b){this.settings=b,this.width=this.settings.container.width(),this.settings.useSizing&&(this.settings.size&&e.$sizeform.appendTo(e.$size),this.settings.presets&&e.$sizepresets.appendTo(e.$size),e.$size.appendTo(e.$right)),this.$inputs=e.$size.find("."+this.settings.prefix+"-input"),this.$presets=e.$size.find("."+this.settings.prefix+"-preset"),this.updateWidth(this.width,!0),this.bOnBlur=a.proxy(this.onBlur,this),this.bOnResize=a.proxy(this.onResize,this),this.bOnKeypress=a.proxy(this.onKeypress,this),this.bOnPresetClick=a.proxy(this.onPresetClick,this),this.attachEvents()},updateWidth:function(b,c){var f,g,h=parseInt(a("html").css("font-size").replace("px",""),10);c?(f=b,g=Math.round(100*(b/h+1e-5))/100):(f=Math.round(b*h),g=b),e.$size.find("."+this.settings.prefix+"-size-px").val(f),e.$size.find("."+this.settings.prefix+"-size-em").val(g),this.width=f,a("#"+this.settings.prefix+"-viewport").stop(!0).animate({width:this.width},this.settings.animSpeed,a.proxy(function(){this.settings.setIframeHeight()},this)),a(document).trigger({type:d,category:"widthResize",width:f})},attachEvents:function(){a(window).bind("resize orientationchange",f(this.bOnResize)),this.$inputs.bind("blur",this.bOnBlur).bind("keypress",this.bOnKeypress),this.$presets.bind("click",this.bOnPresetClick)},onBlur:function(b){var c=b.currentTarget,d=a(c),e=d.val();this.updateWidth(e,d.hasClass(this.settings.prefix+"-size-px"))},onKeypress:function(b){var c=b.currentTarget,d=a(c),e=b.keyCode||b.which;13==e&&(b.preventDefault(),d.trigger("blur"))},onResize:function(a){this.updateWidth(this.settings.container.width(),!0)},onPresetClick:function(b){var c=b.target,d=a(c),e=d.data("width")?d.data("width"):this.settings.container.width();b.preventDefault(),this.updateWidth(e,!0)}},_options:{activeClass:"active",init:function(b){this.settings=b,this.$list=a("<ul />"),this.settings.grid&&this.grid.init(this.settings),this.settings.baseline&&this.baseline.init(this.settings),e.$optionsbutton.appendTo(e.$options),e.$optionslist.appendTo(e.$options),e.$options.appendTo(e.$right),this.$buttons=e.$optionslist.find("button"),this.bOnButtonsClick=a.proxy(this.onButtonsClick,this),this.bOnMenuClick=a.proxy(this.onMenuClick,this),this.attachEvents()},attachEvents:function(){this.$buttons.bind("click",this.bOnButtonsClick),this.settings.responsive&&e.$optionsbutton.bind("click",this.bOnMenuClick)},onButtonsClick:function(b){var c=b.currentTarget,d=a(c),e=d.data("option");d.hasClass("on")?(this[e].off(),d.removeClass("on"),"undefined"!=typeof Storage&&localStorage.removeItem("debug-"+e)):(this[e].on(),d.addClass("on"),"undefined"!=typeof Storage&&localStorage.setItem("debug-"+e,!0))},onMenuClick:function(a){a.preventDefault(),e.$optionslist.toggleClass(this.activeClass)},grid:{$template:a('<li><button data-option="grid">Grid</button></li>'),init:function(a){this.settings=a,this.id=this.settings.prefix+"-grid",this.$template.appendTo(e.$optionslist)},off:function(){this.settings.$wrapper.find("#"+this.id).remove()},on:function(){var a,b=this.settings.columns,c=['<div id="'+this.id+'">'],d='<div class="row">';for(c.push(d),a=0;b-1>=a;a++)c.push('<div class="'+this.settings.columnClass+'"></div>');c.push("</div></div>"),this.settings.$wrapper.append(c.join(""))},updateWidth:function(b){a("#"+this.id).stop(!0).animate({width:b})}},baseline:{$template:a('<li><button data-option="baseline">Baseline</button></li>'),init:function(a){this.settings=a,this.id=this.settings.prefix+"-baseline",this.$template.appendTo(e.$optionslist)},off:function(){this.settings.$wrapper.find("#"+this.id).remove()},on:function(){var b,c=parseInt(a("html").css("font-size").replace("px",""),10),d=function(){var b=a("body").css("line-height");return b.indexOf("px")>-1?b.replace("px",""):b*c},e=-10,f=(d()-1)/c,g=this.settings.$wrapper.height()/d(),h=[];for(b=0;g>=b;b++)h.push('<li style="height:'+f+'em"></li>');this.settings.$wrapper.append('<ol id="'+this.id+'" style="top:'+e+'px">'+h.join("")+"</ol>")}}},_styles:{init:function(a){this.getStyles(a.$wrapper.find("#h2-header").get(0))},getStyles:function(a){for(var b=window.getComputedStyle(a),c=0;c<b.length;c++)console.log(b[c]+"="+b.getPropertyValue(""+b[c]))}},destroy:function(){if(this._attachEvents("unbind"),a("#"+e.$header.attr("id")).remove(),this.settings.useSizing){var b=this.settings.$wrapper.clone();console.log(b)}else a("#"+e.$viewport.attr("id")).contents().unwrap()}},f=function(c,d,e){d||(d=a.fn[b].defaults.throttle);var f,g;return function(){var a=e||this,b=+new Date,h=arguments;f&&f+d>b?(clearTimeout(g),g=setTimeout(function(){f=b,c.apply(a,h)},d)):(f=b,c.apply(a,h))}}}(jQuery);
//# sourceMappingURL=jquery.styleguide.js.map